<!DOCTYPE html>
<html lang="zh-Hant-TW">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>朝會ing</title>
  <!--Bootstrap CSS-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="css/style.css">
</head>
<style>
  body {
    margin: 0;
    padding: 0;
    overflow-x: hidden;
  }

  /* custom scrollbar */
  body::-webkit-scrollbar {
    width: 16px;
  }

  ::-webkit-scrollbar-thumb {
    background-color: #585858;
    border-radius: 8px;
    border: 4px solid transparent;
    background-clip: content-box;
  }

  ::-webkit-scrollbar-thumb:hover {
    background-color: #000000;
  }

  .people-look {
    width: 100vw;
    /* height: 50vh; */
  }

  .pic-look {
    height: 25vh;
    /*跟flexbox-look一樣高*/
    object-fit: contain;
  }

  .flexbox-look {
    position: relative;
    margin-top: 5vh;
    height: 25vh;
    display: flex;
    justify-content: space-around;
  }


  .comic-bg {
    height: 100vh;
    width: 100vw;
    overflow: hidden;
    background-image: url(image/all-need-to-use/content-comic-bg.png);
    background-size: cover;
    background-repeat: no-repeat;
    background-position: center center;
    position: fixed;
    z-index: -100;
  }

  @media screen and (max-width: 768px) {
    #box {
      left: 200px;
      /* 手机版本 */
    }
  }

  /*menu*/
  #menu section .menu-bg {
            height: 100%;
            width: 100%;
            overflow: hidden;
            background-image: url(image/all-need-to-use/menu-bg.png);
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center center;
            position: fixed;
            z-index: -100;
        }
</style>

<body>
  <audio id="audio" src="bgm/maou_bgm_piano07.mp3" autoplay loop></audio>
  <header>
    <div class="all-icon-container">
      <div class="burger icon" id="open-menu-button">
        <div class="icon-size">
          <img src="image/home/buger_icon.png" class="w-100">
        </div>
      </div>
      <div class="sound icon">
        <div class="icon-size">
          <img id="audioToggle" src="image/home/sound_icon_2.png" class="w-100">
        </div>
      </div>
    </div>
  </header>
  
  <div class="comic-bg"></div>
  <div class="container front-story">
    <div class="row">
      <div class="content col-12">
        <img src="image/morning-ing/morning-front.png" class="w-100">
      </div>
    </div>
  </div>

  <div class="visual-effect">
    <div class="content">
      <div class="character-status">
        <!-- 現在用bg image做湘雲的反應，下面的是直接圖片 -->
        <div class="container d-flex justify-content-center align-items-center position-relative"
          style="height: 100vh;">
          <div class="col-2 position-absolute d-flex justify-content-center align-items-center position-relative"
            style="height: 100%;">
            <img src="image/morning-ing/character-status-1.png" class="w-100 character-status1 position-absolute">
            <img src="image/morning-ing/character-status-2.png" class="w-100 character-status2 position-absolute">
            <img src="image/morning-ing/character-status-3.png" class="w-100 character-status3 position-absolute">
          </div>
          <div class="people-look">
            <div class="flexbox-look look-horizontal-group-01">
              <img src="image/morning-ing/look-01.png" class="pic-look" style="position:absolute; margin-right: 70%;">
              <img src="image/morning-ing/look-02.png" class="pic-look"
                style="position:absolute; margin-top: 5%; margin-left: 70%;">
            </div>
            <div class="flexbox-look look-horizontal-group-02">
              <img src="image/morning-ing/look-03.png" class="pic-look" style="position:absolute; margin-right: 70%;">
              <img src="image/morning-ing/look-04.png" class="pic-look" style="position:absolute; margin-left: 70%;">
            </div>
            <div class="flexbox-look look-horizontal-group-03">
              <img src="image/morning-ing/look-05.png" class="pic-look"
                style="position:absolute; margin-top: -5%; margin-right: 70%;">
              <!--<img src="image/morning-ing/look-06.png" class="pic-look" style="position:absolute; margin-left: 30%;">-->
              <img src="image/morning-ing/look-07.png" class="pic-look" style="position:absolute; margin-left: 30%;">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container back-story">
    <div class="content col-12">
      <img src="image/morning-ing/morning-back.png" class="w-100">
    </div>
    <div class="go-next-web" style="display: flex; justify-content: flex-end; margin-bottom: 5%;">
      <a href="chapter2-page.html"><button>進入章節二</button></a>
    </div>
  </div>

  <div id="menu">
    <section>
      <div class="menu-bg"></div>
      <div class="all-icon-container">
        <div class="close icon" id="close-menu-button">
          <div class="icon-size">
            <img src="image/all-need-to-use/burger-close-icon.png" class="w-100">
          </div>
        </div>
      </div>
      <div class="container d-flex">
        <div class="col-12">
          <div class="content-container d-flex justify-content-center align-items-center" style="height: 100vh;">
            <div class="line-content-box">
              <div class="note-layout" style="width: 100%;">
                <div class="note-date-image d-flex justify-content-end">
                  <img src="image/all-need-to-use/note-date.png" style="width: 10vw; padding-right: 20px;">
                </div>
              </div>
              <ul style="padding: 0 1.8vw;">
                <li>
                  <span class="menu-topic-text">目錄<span class="small-size-text">MENU</span></span>
                </li>
                <li>
                  <a href="chapter-list-page.html">
                    <div class="menu-option">
                      劇情章節.
                      <div class="hover-line"></div>
                    </div>
                  </a>
                </li>
                <li>
                  <a href="message-page.html">
                    <div class="menu-option">
                      我有話要說.
                      <div class="hover-line"></div>
                    </div>
                  </a>
                </li>
                <li>
                  <a href="#">
                    <div class="menu-option">
                      延伸閱讀.
                      <div class="hover-line"></div>
                    </div>
                  </a>
                </li>
                <li>
                  <a href="#">
                    <div class="menu-option">
                      引用資料.
                      <div class="hover-line"></div>
                    </div>
                  </a>
                </li>
                <li>
                  <a href="#">
                    <div class="menu-option">
                      關於我們.
                      <div class="hover-line"></div>
                    </div>
                  </a>
                </li>
                <li>
                  <div class="border"></div>
                </li>
                <li>
                  <div class="border"></div>
                </li>
              </ul>
              <div class="pen-layout position-absolute" style="bottom: -50px; right: -100px; width: 25vw;">
                <div class="pen-image">
                  <img src="image/all-need-to-use/menu-pen.png" style="width: 100%;">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <script src="	https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.27/bundled/lenis.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
  <script src="js/menu.js"></script>

  <script>
    openMenu();
    closeMenu();
    // 點擊音效開關按鈕時切換音效狀態
    document.getElementById('audioToggle').addEventListener('click', toggleAudio);
    

    gsap.registerPlugin(ScrollTrigger);

    // lookHorizontalGroupAnima();

    function lookHorizontalGroupAnima() {
      //stagger好像在純動畫裡面用比較好，在這邊功能會跟scrub相衝突
      const allPicLook = document.getElementsByClassName('pic-look');
      gsap.set(".character-status1", { autoAlpha: 1 });
      gsap.set(".character-status2", { autoAlpha: 0 });
      gsap.set(".character-status3", { autoAlpha: 0 });

      gsap.set(allPicLook, { autoAlpha: 0 })
      const tl = gsap.timeline({
        defaults: {
          ease: "expo",
        },
        scrollTrigger: {
          trigger: ".character-status",
          start: "top top",
          scrub: 1,
          end: "bottom top",
          pin: ".character-status",
          // markers: true
        }
      });

      tl
        //.to(allPicLook, {stagger: {each: 0.3}})
        .to(".look-horizontal-group-01 img:nth-child(1)", { autoAlpha: 1, x: 300 })
        .to(".look-horizontal-group-01 img:nth-child(2)", { autoAlpha: 1, x: -250 })
        .to(".character-status1", { autoAlpha: 0 })
        .to(".character-status2", { autoAlpha: 1 }, "-=0.3")
        .to(".look-horizontal-group-02 img:nth-child(1)", { autoAlpha: 1, x: 220 }, "-=0.3")
        .to(".look-horizontal-group-02 img:nth-child(2)", { autoAlpha: 1, x: -310 })
        .to(".look-horizontal-group-03 img:nth-child(1)", { autoAlpha: 1, x: 300 })
        .to(".character-status2", { autoAlpha: 0 })
        .to(".character-status3", { autoAlpha: 1 }, "-=0.3")
        .to(".look-horizontal-group-03 img:nth-child(2)", { autoAlpha: 1, x: -80 })
        .to(".look-horizontal-group-03 img:nth-child(3)", { autoAlpha: 1, x: -200 })
    }

    function MobilelookHorizontalGroupAnima() {
      //stagger好像在純動畫裡面用比較好，在這邊功能會跟scrub相衝突
      const allPicLook = document.getElementsByClassName('pic-look');
      gsap.set(".character-status1", { autoAlpha: 1 });
      gsap.set(".character-status2", { autoAlpha: 0 });
      gsap.set(".character-status3", { autoAlpha: 0 });

      gsap.set(allPicLook, { autoAlpha: 0 })
      const tl = gsap.timeline({
        defaults: {
          ease: "expo",
        },
        scrollTrigger: {
          trigger: ".character-status",
          start: "top top",
          scrub: 1,
          end: "bottom top",
          pin: ".character-status",
          // markers: true
        }
      });

      tl
        //.to(allPicLook, {stagger: {each: 0.3}})
        .to(".look-horizontal-group-01 img:nth-child(1)", { autoAlpha: 1, x: 150 })
        .to(".look-horizontal-group-01 img:nth-child(2)", { autoAlpha: 1, x: -250 })
        .to(".character-status1", { autoAlpha: 0 })
        .to(".character-status2", { autoAlpha: 1 }, "-=0.3")
        .to(".look-horizontal-group-02 img:nth-child(1)", { autoAlpha: 1, x: 200 }, "-=0.3")
        .to(".look-horizontal-group-02 img:nth-child(2)", { autoAlpha: 1, x: -310 })
        .to(".look-horizontal-group-03 img:nth-child(1)", { autoAlpha: 1, x: 300 })
        .to(".character-status2", { autoAlpha: 0 })
        .to(".character-status3", { autoAlpha: 1 }, "-=0.3")
        .to(".look-horizontal-group-03 img:nth-child(2)", { autoAlpha: 1, x: -80 })
        .to(".look-horizontal-group-03 img:nth-child(3)", { autoAlpha: 1, x: -50 })
    }

    if (window.matchMedia("(max-width: 768px)").matches) {
      // 手机版本动画
      MobilelookHorizontalGroupAnima();
    } else {
      // 电脑版本动画
      lookHorizontalGroupAnima();
    }
  </script>

</body>

</html>